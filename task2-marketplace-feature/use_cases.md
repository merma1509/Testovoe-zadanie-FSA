# Варианты использования (Use Cases) для публикации товара на маркетплейсе

## Use Case 1: Создание и публикация товара

### Основная информация

**Название**: Создание и публикация товара  
**ID**: UC-001  
**Автор**: Продавец  
**Приоритет**: High  
**Версия**: 1.0  

### Акторы

- **Основной**: Продавец
- **Вторичный**: Система
- **Опциональный**: Модератор

### Предусловия

1. Продавец авторизован в системе
2. Профиль продавца верифицирован
3. У продавца есть права на создание товаров
4. Система категорий загружена и доступна

### Постусловия

**Успешный сценарий**:

- Товар создан в системе со статусом "Опубликовано"
- Товар отображается на витрине маркетплейса
- Товар доступен для поиска и фильтрации

**Неуспешный сценарий**:

- Система возвращает сообщение об ошибке
- Данные не сохраняются или сохраняются как черновик

### Основной поток (Happy Path)

| Шаг | Действие | Актор | Ожидаемый результат |
|-----|----------|-------|---------------------|
| 1 | Нажать "Добавить товар" | Продавец | Открывается форма создания товара |
| 2 | Заполнить название товара | Продавец | Название сохраняется, валидация проходит |
| 3 | Заполнить описание товара | Продавец | Описание сохраняется, форматирование применяется |
| 4 | Установить цену | Продавец | Цена валидируется, сохраняется |
| 5 | Выбрать категорию | Продавец | Категория выбирается, подкаталоги отображаются |
| 6 | Загрузить изображения | Продавец | Изображения загружаются, превью создаются |
| 7 | Указать количество на складе | Продавец | Количество сохраняется |
| 8 | Нажать "Опубликовать" | Продавец | Товар публикуется на витрине |
| 9 | Получить подтверждение | Система | Отображается сообщение "Товар опубликован" |

### Альтернативные потоки

**A1: Сохранение черновика**

- **Шаг 8а**: Продавец нажимает "Сохранить черновик"
- **Результат**: Товар сохраняется со статусом "Черновик"

**A2: Валидация не пройдена**

- **Шаг 2-7**: Система обнаруживает невалидные данные
- **Результат**: Отображаются ошибки, подсвечиваются проблемные поля

**A3: Ошибка загрузки изображений**

- **Шаг 6**: Изображение не загружается (неверный формат, размер)
- **Результат**: Система показывает ошибку с рекомендациями

**A4: Категория не найдена**

- **Шаг 5**: Выбранная категория недоступна
- **Результат**: Система предлагает альтернативные категории

**A5: Отложенная публикация**

- **Шаг 8**: Продавец выбирает "Запланировать публикацию"
- **Результат**: Товар будет опубликован в указанное время

### Исключительные потоки

**E1: Ошибка сервера**

- **Любой шаг**: Система становится недоступной
- **Результат**: Данные автоматически сохраняются как черновик

**E2: Потеря интернет-соединения**

- **Любой шаг**: Продавец теряет соединение
- **Результат**: Данные сохраняются локально, синхронизация при восстановлении

**E3: Превышение лимитов**

- **Шаг 1**: Продавец достиг лимита товаров
- **Результат**: Система предлагает upgrade тарифа

---

## Use Case 2: Массовая загрузка товаров

### Основная информация

**Название**: Массовая загрузка товаров  
**ID**: UC-002  
**Автор**: Продавец  
**Приоритет**: Medium  
**Версия**: 1.0  

### Акторы

- **Основной**: Продавец
- **Вторичный**: Система

### Предусловия

1. Продавец авторизован
2. У продавца есть права на массовую загрузку
3. Данные товаров подготовлены в требуемом формате

### Основной поток

| Шаг | Действие | Актор | Ожидаемый результат |
|-----|----------|-------|---------------------|
| 1 | Выбрать "Массовая загрузка" | Продавец | Открывается интерфейс загрузки |
| 2 | Скачать шаблон | Продавец | Файл шаблона скачивается |
| 3 | Заполнить шаблон данными | Продавец | Данные подготовлены в правильном формате |
| 4 | Загрузить заполненный файл | Продавец | Файл загружается на сервер |
| 5 | Система валидирует данные | Система | Отчет о валидации отображается |
| 6 | Подтвердить загрузку | Продавец | Товары создаются в системе |
| 7 | Получить отчет о результате | Система | Отчет с успешными и ошибочными записями |

### Альтернативные потоки

**A1: Ошибки в данных**

- **Шаг 5**: Система находит ошибки в файле
- **Результат**: Отображается детальный отчет ошибок, возможность исправить

**A2: Неподдерживаемый формат**

- **Шаг 4**: Загружен файл неверного формата
- **Результат**: Система предлагает скачать правильный шаблон

---

## Use Case 3: Редактирование опубликованного товара

### Основная информация

**Название**: Редактирование опубликованного товара  
**ID**: UC-003  
**Автор**: Продавец  
**Приоритет**: High  
**Версия**: 1.0  

### Акторы

- **Основной**: Продавец
- **Вторичный**: Система
- **Опциональный**: Модератор

### Предусловия

1. Товар существует в системе
2. Продавец является владельцем товара
3. Товар не заблокирован модератором

### Основной поток

| Шаг | Действие | Актор | Ожидаемый результат |
|-----|----------|-------|---------------------|
| 1 | Найти товар в "Мои товары" | Продавец | Товар найден в списке |
| 2 | Нажать "Редактировать" | Продавец | Открывается форма редактирования |
| 3 | Внести изменения | Продавец | Данные обновляются в форме |
| 4 | Нажать "Сохранить изменения" | Продавец | Изменения применяются |
| 5 | Система проверяет изменения | Система | Валидация проходит успешно |
| 6 | Получить подтверждение | Система | "Изменения сохранены" |

### Альтернативные потоки

**A1: Изменение ключевых полей**

- **Шаг 3**: Изменены цена, категория или название
- **Результат**: Требуется повторная модерация

**A2: Товар в процессе покупки**

- **Шаг 1**: Товар находится в корзине у покупателя
- **Результат**: Некоторые поля недоступны для редактирования

---

## Use Case 4: Управление статусом товара

### Основная информация

**Название**: Управление статусом товара  
**ID**: UC-004  
**Автор**: Продавец  
**Приоритет**: Medium  
**Версия**: 1.0  

### Основной поток

| Действие | Описание | Результат |
|----------|----------|-----------|
| Снять с публикации | Товар становится невидимым на витрине | Статус "Снят" |
| Вернуть в публикацию | Товар снова появляется на витрине | Статус "Опубликовано" |
| Архивировать | Товар перемещается в архив | Статус "Архив" |
| Удалить | Товар удаляется из системы | Товар удален |

### Бизнес-правила

1. Нельзя удалить товар с активными заказами
2. Архивный товар нельзя вернуть в публикацию без редактирования
3. При снятии с публикации товар остается в поиске 24 часа

---

## Дополнительные сценарии

### Сценарий: Копирование товара

- Продавец может скопировать существующий товар для создания похожего
- Копируются все данные кроме изображений и уникальных ID

### Сценарий: Предпросмотр товара

- Перед публикацией продавец может увидеть, как товар будет выглядеть на витрине
- Предпросмотр доступен в режиме реального времени

### Сценарий: История изменений

- Система ведет лог всех изменений товара
- Продавец может просмотреть историю и откатить изменения

---

## Метрики использования

| Use Case | KPI | Целевое значение |
|----------|-----|------------------|
| UC-001 | Время создания товара | < 5 минут |
| UC-002 | Успешность загрузки | > 90% |
| UC-003 | Время редактирования | < 2 минут |
| UC-004 | Частота смены статуса | < 10% в день |

---

## Связи с другими Use Cases

| Use Case | Связь | Описание |
|----------|-------|----------|
| UC-001 | <<include>> | Управление изображениями |
| UC-002 | <<extend>> | Валидация данных |
| UC-003 | <<include>> | История изменений |
| UC-004 | <<include>> | Уведомления |
